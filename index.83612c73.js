function e(e){for(var t,n=[],r="",o=0;t=e.charAt(o);o++)"^*/+-".indexOf(t)>-1?""==r&&"-"==t?r="-":(n.push(parseFloat(r),t),r=""):r+=e.charAt(o);return""!=r&&n.push(parseFloat(r)),n}const t=e=>{for(var t,n=[{"^":(e,t)=>Math.pow(e,t)},{"*":(e,t)=>e*t,"/":(e,t)=>e/t},{"+":(e,t)=>e+t,"-":(e,t)=>e-t}],r=[],o=0;o<n.length;o++){for(var l=0;l<e.length;l++)n[o][e[l]]?t=n[o][e[l]]:t?(r[r.length-1]=t(r[r.length-1],e[l]),t=null):r.push(e[l]);e=r,r=[]}return e.length>1?(console.log("Error: unable to resolve calculation"),e):e[0]},n=()=>document.getElementById("board"),r=()=>document.getElementById("toggler"),o=e=>{n().value=e},l=()=>document.documentElement;var a=e=>{let t=(e=>e.replaceAll("*","x"))(e),n=t;document.getElementById("screen").value=n};const s=e=>{if("infinity"===e.toLowerCase())return"Infinity";if(-1===e.indexOf("."))return c(e);const t=e.split(".");return`${c(t[0])}.${t[1]}`},c=e=>{let t=e.toString(),n=[];const r=t.length,o={remainder:r%3,div:r/3};if(0===o.remainder)for(let e=0;e<o.div;e++){const r=t.substring(3*e,3*e+3);n.push(r)}else{let e=t;const r=t.substring(0,o.remainder);n.push(r),e=e.replace(r,"");for(let t=0;t<o.div;t++){const r=e.substring(3*t,3*t+3);n.push(r)}n.pop()}return t=n.join(","),t},i=(e,t)=>{let n=e;return"x"===t?("*"!==e[e.length-1]&&(n=e+"*"),"/"===e[e.length-1]&&(n=e.substring(0,e.length-1)+"*")):"/"===t?("/"!==e[e.length-1]&&(n=e+"/"),"*"===e[e.length-1]&&(n=e.substring(0,e.length-1)+"/")):"+"===t?("+"!==e[e.length-1]&&(n=e+"+"),"*"===e[e.length-1]&&(n=e.substring(0,e.length-1)+"*")):n=e+t,console.log(n),n},u=e=>{const t=n().value;o(i(t,e)),a(n().value)},d=()=>{const e=n().value;"infinity"!==e.toLowerCase()?(o(e.substring(0,e.length-1)),a(n().value)):g()},g=()=>{o(""),a("")},h=()=>{const r=n().value;if(""!==r)try{const n=t(e(r)).toString();o(n),a(s(n))}catch(e){console.error(e),o(""),a("Error")}};const m=e=>{u(e.target.dataset.input)},v=e=>{d(e.target.dataset.input)},p=e=>{g()},f=e=>{h()};var E=()=>{document.querySelectorAll("button[data-input]").forEach((e=>{e.addEventListener("click",m)})),document.querySelector("button[data-action=clear]").addEventListener("click",v),document.querySelector("button[data-action=reset]").addEventListener("click",p),document.querySelector("button[data-action=eval]").addEventListener("click",f)};const y=e=>{(()=>{for(let e=1;e<=3;e++)l().classList.remove(`theme${e}`)})(),e>3?l().classList.add("theme1"):l().classList.add(`theme${e}`)};const b=localStorage.setItem;localStorage.setItem=function(e,t){var n=new Event("itemInserted");n.value=t,n.key=e,document.dispatchEvent(n),b.apply(this,arguments)};const I=()=>{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;let t=localStorage.getItem("theme");return e?(L(3),t=localStorage.getItem("theme"),void y(t)):(null===t&&(L(1),y(t)),t=localStorage.getItem("theme"),L(t),void y(t))},L=e=>{localStorage.setItem("theme",e)},S=e=>{const{scrollTop:t,scrollLeft:n}=l(),{x:o,y:a}=e;return(e=>{var t=r().clientWidth;let n=Math.floor(t/3),o=Math.floor(e/n)+1;L(o)})(o-r().getBoundingClientRect().x-n)};var w=()=>{r().addEventListener("pointerup",S)};window.onload=()=>{I(),w(),document.addEventListener("itemInserted",(e=>{y(e.value)}),!1),E()};
//# sourceMappingURL=index.83612c73.js.map
