{"mappings":"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","sources":["js/utils/calc.js","js/utils/constants.js","js/utils/format.js","js/utils/utils.js","js/events/board.js","js/events/input.js","js/events/buttons.js","js/utils/classHelpers.js","js/utils/localstorage.js","js/events/toggle.js","js/index.js","js/events/storage.js","js/events/index.js"],"sourcesContent":["export function parseCalculationString(s) {\r\n    // --- Parse a calculation string into an array of numbers and operators\r\n    var calculation = [],\r\n        current = '';\r\n    for (var i = 0, ch; ch = s.charAt(i); i++) {\r\n        if ('^*/+-'.indexOf(ch) > -1) {\r\n            if (current == '' && ch == '-') {\r\n                current = '-';\r\n            } else {\r\n                calculation.push(parseFloat(current), ch);\r\n                current = '';\r\n            }\r\n        } else {\r\n            current += s.charAt(i);\r\n        }\r\n    }\r\n    if (current != '') {\r\n        calculation.push(parseFloat(current));\r\n    }\r\n    return calculation;\r\n}\r\n\r\nexport const calculate = (calc) => {\r\n    // --- Perform a calculation expressed as an array of operators and numbers\r\n    var ops = [{'^': (a, b) => Math.pow(a, b)},\r\n               {'*': (a, b) => a * b, '/': (a, b) => a / b},\r\n               {'+': (a, b) => a + b, '-': (a, b) => a - b}],\r\n        newCalc = [],\r\n        currentOp;\r\n    for (var i = 0; i < ops.length; i++) {\r\n        for (var j = 0; j < calc.length; j++) {\r\n            if (ops[i][calc[j]]) {\r\n                currentOp = ops[i][calc[j]];\r\n            } else if (currentOp) {\r\n                newCalc[newCalc.length - 1] = \r\n                    currentOp(newCalc[newCalc.length - 1], calc[j]);\r\n                currentOp = null;\r\n            } else {\r\n                newCalc.push(calc[j]);\r\n            }\r\n        }\r\n        calc = newCalc;\r\n        newCalc = [];\r\n    }\r\n    if (calc.length > 1) {\r\n        console.log('Error: unable to resolve calculation');\r\n        return calc;\r\n    } else {\r\n        return calc[0];\r\n    }\r\n}","export const getScreen = () => document.getElementById('screen');\r\n\r\nexport const getBoard = () => document.getElementById('board')\r\n\r\nexport const getToggler = () => document.getElementById('toggler')\r\n\r\nexport const themes = 3;\r\n\r\nexport const setBoardValue = (_val) => {getBoard().value = _val; return}\r\n\r\nexport const getHTML = () => document.documentElement;","import { getScreen } from \"./constants\";\r\n\r\nconst replaceAsterisk = (val) => val.replaceAll('*', 'x')\r\n\r\nconst format  = (val) => {\r\n\r\n    let cacheVal = replaceAsterisk(val);\r\n    \r\n    let newVal = cacheVal;\r\n    getScreen().value = newVal;\r\n}\r\n\r\nexport default format;","export const splitNum = (number) => {\r\n    if (number.toLowerCase() === 'infinity') {\r\n        return 'Infinity';\r\n    }\r\n\r\n    if (number.indexOf('.') === -1) {\r\n        return splitNumber(number);\r\n    }\r\n\r\n    const num = number.split('.');\r\n    return `${splitNumber(num[0])}.${num[1]}`;\r\n}\r\n\r\nexport const splitNumber = (number) => {\r\n    let num = number.toString();\r\n    let numArray = [];\r\n    const len = num.length;\r\n    const params = {\r\n        remainder: len % 3,\r\n        div: len / 3\r\n    }\r\n\r\n    if (params.remainder === 0) {\r\n        for (let i = 0; i < params.div; i++) {\r\n            const str = num.substring(i * 3, (i * 3) + 3);\r\n            numArray.push(str);\r\n        }\r\n    }\r\n    else{\r\n        let newNum = num;\r\n        const prefix = num.substring(0, params.remainder);\r\n        numArray.push(prefix);\r\n        newNum = newNum.replace(prefix, '');\r\n        for (let i = 0; i < params.div; i++) {\r\n            const str = newNum.substring(i * 3, (i * 3) + 3);\r\n            numArray.push(str);\r\n        }\r\n        numArray.pop();\r\n    }\r\n    \r\n    num = numArray.join(',');\r\n    return num;\r\n}\r\n\r\nexport const counterSymbolsCheck = (prevValue, value) => {\r\n    let val = prevValue;\r\n    \r\n    if (value === 'x') {\r\n        if (prevValue[prevValue.length-1] !== '*') {\r\n            val = (prevValue + '*')\r\n        }\r\n\r\n        if (prevValue[prevValue.length-1] === '/') {\r\n            val = prevValue.substring(0, prevValue.length-1) + '*';\r\n        }\r\n    }\r\n    else if(value === '/'){\r\n        if (prevValue[prevValue.length-1] !== '/') {\r\n            val = (prevValue + '/')\r\n        }\r\n\r\n        if (prevValue[prevValue.length-1] === '*') {\r\n            val = prevValue.substring(0, prevValue.length-1) + '/';\r\n        }\r\n    }\r\n    else if(value === '+'){\r\n        if (prevValue[prevValue.length-1] !== '+') {\r\n            val = (prevValue + '+')\r\n        }\r\n\r\n        if (prevValue[prevValue.length-1] === '*') {\r\n            val = prevValue.substring(0, prevValue.length-1) + '*';\r\n        }\r\n    }\r\n    else{\r\n        val = prevValue + value\r\n    }\r\n\r\n    console.log(val);\r\n    return val;\r\n}","import { calculate, parseCalculationString } from \"../utils/calc\";\r\nimport { getBoard, setBoardValue } from \"../utils/constants\"\r\nimport format from \"../utils/format\"\r\nimport { counterSymbolsCheck, splitNum } from \"../utils/utils\";\r\n\r\nexport const write = (val) => {\r\n    const prevValue = getBoard().value;\r\n\r\n    setBoardValue(counterSymbolsCheck(prevValue, val));\r\n\r\n    format(getBoard().value);\r\n}\r\n\r\nexport const clear = () => {\r\n    const prevValue = getBoard().value;\r\n    if (prevValue.toLowerCase() === 'infinity') {\r\n        reset()\r\n        return;\r\n    }\r\n\r\n    setBoardValue(prevValue.substring(0, prevValue.length-1))\r\n    format(getBoard().value);\r\n}\r\n\r\nexport const reset = () => {\r\n    setBoardValue('')\r\n    format('');\r\n}\r\n\r\nexport const evaluate = () => {\r\n    const boardVal = getBoard().value;\r\n    if (boardVal === '') {\r\n        return;\r\n    }\r\n    try {\r\n        const result = (calculate(parseCalculationString(boardVal))).toString();\r\n        setBoardValue(result);\r\n        format(splitNum(result));\r\n    } catch (e) {\r\n        console.error(e);\r\n        setBoardValue('');\r\n        format('Error')\r\n    }\r\n}\r\n\r\nconst boardEvents = () => {\r\n}\r\n\r\nexport default boardEvents;","import { getBoard, setBoardValue } from \"../utils/constants\";\r\nimport { write, reset, clear, evaluate } from \"./board\";\r\n\r\nexport const _handleInput = (e) => {\r\n    write(e.target.dataset.input)\r\n}\r\n\r\nexport const _handleClear = (e) => {\r\n    clear(e.target.dataset.input);\r\n}\r\n\r\nexport const _handleReset = (e) => {\r\n    reset()\r\n}\r\n\r\nexport const _handleEval = (e) => {\r\n    evaluate()\r\n}","import { _handleClear, _handleEval, _handleInput, _handleReset } from \"./input\";\r\n\r\nconst input = () => {\r\n    const _inputs = document.querySelectorAll('button[data-input]');\r\n    _inputs.forEach(item => {\r\n        item.addEventListener('click', _handleInput);\r\n    })\r\n}\r\n\r\nconst clear = () => {\r\n    const _btn = document.querySelector('button[data-action=clear]');\r\n    _btn.addEventListener('click', _handleClear)\r\n}\r\n\r\nconst reset = () => {\r\n    const _btn = document.querySelector('button[data-action=reset]');\r\n    _btn.addEventListener('click', _handleReset)\r\n}\r\n\r\nconst evaluate = () => {\r\n    const _btn = document.querySelector('button[data-action=eval]');\r\n    _btn.addEventListener('click', _handleEval)\r\n}\r\n\r\nconst _buttonEvents = () => {\r\n    input()\r\n    clear()\r\n    reset()\r\n    evaluate()\r\n}\r\n\r\nexport default _buttonEvents;","import { getHTML, themes } from \"./constants\";\r\n\r\nconst removeThemes = () => {\r\n    for (let i = 1; i <= themes; i++) {\r\n        getHTML().classList.remove(`theme${i}`);        \r\n    }\r\n}\r\n\r\nexport const setTheme = (theme) => {\r\n    removeThemes();\r\n    if (theme > themes) {\r\n        getHTML().classList.add('theme1');\r\n        return;\r\n    }\r\n    getHTML().classList.add(`theme${theme}`);\r\n}","import { setTheme } from \"./classHelpers\";\r\n\r\nconst originalSetItem = localStorage.setItem;\r\n\r\nlocalStorage.setItem = function(key, value) {\r\n  var event = new Event('itemInserted');\r\n\r\n  event.value = value; // Optional..\r\n  event.key = key; // Optional..\r\n\r\n  document.dispatchEvent(event);\r\n\r\n  originalSetItem.apply(this, arguments);\r\n};\r\n\r\n\r\nexport const initStorage = () => {\r\n    const dark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n    let theme = localStorage.getItem(\"theme\");\r\n    if (!dark) {\r\n        if (theme === null) {\r\n            setThemeStore(1)\r\n            setTheme(theme);\r\n        }\r\n        theme = localStorage.getItem(\"theme\");\r\n        setThemeStore(theme);\r\n        setTheme(theme);\r\n        return;\r\n    }\r\n    else{\r\n        setThemeStore(3)\r\n        theme = localStorage.getItem(\"theme\");\r\n        setTheme(theme);\r\n        return;\r\n    }\r\n}\r\n\r\nexport const setThemeStore = (val) => {\r\n    localStorage.setItem('theme', val);\r\n}\r\n\r\n","import { getHTML, getToggler, themes } from \"../utils/constants\";\r\nimport { setThemeStore } from \"../utils/localstorage\";\r\n\r\nconst changeTheme = (x) => {\r\n    var toggleWidth = getToggler().clientWidth;\r\n    let regionsWidth = Math.floor(toggleWidth / themes)\r\n    let region = Math.floor(x / regionsWidth) + 1;\r\n    \r\n    setThemeStore(region);\r\n}\r\n\r\nconst handleTogglerClick = (e) => {\r\n    const {scrollTop, scrollLeft} = getHTML();\r\n    const {x, y} = e;\r\n    const rect = getToggler().getBoundingClientRect();\r\n    let xVal = x-rect.x-scrollLeft;\r\n    return changeTheme(xVal);\r\n}\r\n\r\nconst listen = () => {\r\n    getToggler().addEventListener('pointerup', handleTogglerClick);\r\n}\r\n\r\nconst toggleInit = () => {\r\n    listen()\r\n}\r\n\r\nexport default toggleInit;","import events from \"./events\";\r\nimport toggle from \"./events/toggle\";\r\nimport { initStorage } from \"./utils/localstorage\";\r\n\r\nwindow.onload = () => {\r\n    initStorage();\r\n    toggle()\r\n    events()\r\n}","import { setTheme } from \"../utils/classHelpers\";\r\n\r\nconst storageEvents = () => {\r\n    document.addEventListener(\"itemInserted\", (e) => {\r\n        setTheme(e.value);\r\n    }, false);\r\n}\r\n\r\nexport default storageEvents;","import boardEvents from \"./board\";\r\nimport buttonEvents from \"./buttons\";\r\nimport storageEvents from \"./storage\";\r\n\r\nconst eventsInit = () => {\r\n    storageEvents();\r\n    buttonEvents();\r\n    boardEvents()\r\n}\r\n\r\nexport default eventsInit;"],"names":["$280eb83aa482af37$export$15753a2699aafee8","s","ch","calculation","current","i","charAt","indexOf","push","parseFloat","$280eb83aa482af37$export$2409b27812872cc9","calc","currentOp","ops","a","b","Math","pow","newCalc","length","j","console","log","$a057643b3418dd8b$export$2223f2dfcfd77cef","document","getElementById","$a057643b3418dd8b$export$f40ca0c0d0d35f37","$a057643b3418dd8b$export$57fcc2d8971f0fe","_val","value","$a057643b3418dd8b$export$5c5129623a8343dd","documentElement","$e94ef3b8aa5ce8e2$export$2e2bcd8739ae039","val","cacheVal","replaceAll","$e94ef3b8aa5ce8e2$var$replaceAsterisk","newVal","$666ac5d9446a6834$export$fa3fd43236459b0f","number","toLowerCase","$666ac5d9446a6834$export$feb80e120a50087f","num","split","toString","numArray","len","params","remainder","div","str","substring","newNum","prefix","replace","pop","join","$666ac5d9446a6834$export$f33f86c5a580a208","prevValue","$a28d3bf52be65210$export$68d8715fc104d294","$a28d3bf52be65210$export$42ffd38884aecdac","$a28d3bf52be65210$export$aad8462122ac592b","$a28d3bf52be65210$export$fef61f332f2c0afc","boardVal","result","e","error","$a060ce73878c0717$export$f5f4ca25393bc7d9","target","dataset","input","$a060ce73878c0717$export$641e71c556babc07","$a060ce73878c0717$export$a8213cc77d1dcaf8","$a060ce73878c0717$export$3a7febca7e411515","$8b13f90e865aed2f$export$2e2bcd8739ae039","querySelectorAll","forEach","item","addEventListener","querySelector","$5687476836086436$export$2e49b867b7a0847c","theme","classList","remove","$5687476836086436$var$removeThemes","add","$b6beb0b7938e6b68$var$originalSetItem","localStorage","setItem","key","event","Event","dispatchEvent","apply","this","arguments","$b6beb0b7938e6b68$export$f5a4c2907b38a6b2","dark","window","matchMedia","matches","getItem","$b6beb0b7938e6b68$export$8c3ff6310ce68230","$62f2ea5109199f0a$var$handleTogglerClick","scrollTop","scrollLeft","x","y","toggleWidth","clientWidth","regionsWidth","floor","region","$62f2ea5109199f0a$var$changeTheme","getBoundingClientRect","$62f2ea5109199f0a$export$2e2bcd8739ae039","onload"],"version":3,"file":"index.83612c73.js.map"}